(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{24:function(t,e,c){},25:function(t,e,c){},34:function(t,e,c){},36:function(t,e,c){"use strict";c.r(e);var n=c(1),s=c.n(n),a=c(15),o=c.n(a),r=c(6),i=(c(24),c(19)),l=c(3),d=(c(25),c(2)),j="https://bloggy-api.herokuapp.com/",b=function(t){return fetch("".concat(j,"posts/").concat(t,"?_embed=comments")).then((function(t){if(!t.ok)throw new Error("Error");return t.json()}))},u=c(0),h=function(){return Object(u.jsxs)("ul",{className:"nav justify-content-center",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link active","aria-current":"page",to:"/home",children:"Home page"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link",to:"/all_posts",children:"All Posts"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link",to:"/add_post",children:"Add Post"})})]})},m=(c(34),function(){return Object(u.jsx)("div",{className:"spinner-border loader",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})}),p=function(t){var e=t.postId,c=t.addNewComment,s=Object(n.useState)(""),a=Object(l.a)(s,2),o=a[0],r=a[1],i=function(t){t.preventDefault(),c({body:o,postId:e}),r("")};return Object(u.jsxs)("form",{children:[Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"form-control","aria-label":"With textarea",value:o,onChange:function(t){return function(t){r(t.target.value)}(t)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",value:o,onClick:function(t){return i(t)},children:"Add a comment"})]})},O=function(t){var e,c,s=t.selectedPostId,a=Object(n.useState)({}),o=Object(l.a)(a,2),r=o[0],i=o[1],d=Object(n.useState)(!0),h=Object(l.a)(d,2),O=h[0],x=h[1],f=Object(n.useState)(!0),v=Object(l.a)(f,2),N=v[0],y=v[1];Object(n.useEffect)((function(){y(!0),b(s).then((function(t){i(t),y(!1)})).catch((function(t){throw i(null),new Error(t)}))}),[s]);return N?Object(u.jsx)(m,{}):Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{children:"Post details:"}),Object(u.jsxs)("div",{className:"card mb-2",children:[Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:null===r||void 0===r?void 0:r.title}),Object(u.jsx)("p",{className:"card-text",children:null===r||void 0===r?void 0:r.body})]}),Object(u.jsx)("ul",{className:"list-group list-group-flush",children:O&&Object(u.jsx)(u.Fragment,{children:null===r||void 0===r||null===(e=r.comments)||void 0===e?void 0:e.map((function(t){return Object(u.jsx)("li",{className:"list-group-item",children:Object(u.jsx)("p",{className:"ps-2",children:t.body})},t.id)}))})}),Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info mb-4",onClick:function(){x(!O)},children:[O?"Hide ":"Show ","".concat(null===r||void 0===r||null===(c=r.comments)||void 0===c?void 0:c.length," comments")]})})]}),Object(u.jsx)(p,{postId:s,addNewComment:function(t){(function(t){return fetch("".concat(j,"comments"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})})(t).then((function(){b(s),y(!0),y(!1)}))}})]})},x=c(18),f=c.n(x),v=function(t){var e=t.changePostId,c=t.selectedPostId,n=t.posts;return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"ALL Posts"}),n.map((function(t){return Object(u.jsxs)("div",{className:"card mb-4",children:[Object(u.jsx)("div",{className:"card-header",children:"Featured"}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:t.title}),Object(u.jsx)("p",{className:"card-text",children:t.body}),Object(u.jsx)(r.b,{to:"/all_posts/".concat(t.id),className:f()("me-2","btn btn-outline-success",{"btn btn-outline-success":c===t.id}),onClick:function(){c===t.id?e(0):e(t.id)},children:c===t.id?"Close":"Open"}),Object(u.jsx)(r.b,{to:"/update_post/".concat(t.id),className:"btn btn-outline-warning me-2",children:"Update"}),Object(u.jsx)("button",{type:"button",className:"btn btn-outline-danger me-2",onClick:function(){return e=t.id,fetch("".concat(j,"posts/").concat(e),{method:"DELETE"});var e},children:"Delete"})]})]},t.id)}))]})},N=function(t){var e=t.posts,c=t.loader,s=Object(n.useState)(0),a=Object(l.a)(s,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){}),[e]),Object(u.jsxs)("div",{className:"row align-items-start",children:[Object(u.jsx)("div",{className:"col",children:c?Object(u.jsx)(u.Fragment,{children:0!==e.length?Object(u.jsx)(v,{changePostId:function(t){r(t)},selectedPostId:o,posts:e}):Object(u.jsx)("h2",{children:"have any posts yet"})}):Object(u.jsx)(m,{})}),Object(u.jsx)(d.b,{path:"/all_posts/:postId",exact:!0,children:0!==o&&Object(u.jsx)("div",{className:"col-lg-5",children:Object(u.jsx)(O,{selectedPostId:o})})})]})},y=function(){var t=Object(n.useState)(""),e=Object(l.a)(t,2),c=e[0],s=e[1],a=Object(n.useState)(""),o=Object(l.a)(a,2),i=o[0],b=o[1],h=(Object(d.g)()||"").postId,m=function(t){t.preventDefault(),function(t,e){fetch("".concat(j,"posts/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})}({title:i,body:c},h),b(""),s("")};return Object(u.jsxs)("form",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Add your post"}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:i,onChange:function(t){return function(t){b(t.target.value)}(t)}})}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:c,onChange:function(t){return function(t){s(t.target.value)}(t)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary me-2",onClick:function(t){return m(t)},children:"Update a post"}),Object(u.jsx)(r.b,{to:"/all_posts",className:"btn btn-danger",children:"Close"})]})},g=function(t){var e=t.maxId,c=Object(n.useState)(e),s=Object(l.a)(c,2),a=s[0],o=s[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),d=i[0],b=i[1],h=Object(n.useState)(""),m=Object(l.a)(h,2),p=m[0],O=m[1],x=function(t){var e;t.preventDefault(),e={id:a+1,title:p,body:d},fetch("".concat(j,"posts"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)}),o(a+1),O(""),b("")};return Object(u.jsxs)("form",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Add your post"}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:p,onChange:function(t){return function(t){O(t.target.value)}(t)}})}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:d,onChange:function(t){return function(t){b(t.target.value)}(t)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(t){return x(t)},children:"Add a post"})]})},S=function(){var t=Object(n.useState)([]),e=Object(l.a)(t,2),c=e[0],s=e[1],a=Object(n.useState)(!1),o=Object(l.a)(a,2),r=o[0],b=o[1];Object(n.useEffect)((function(){b(!1),fetch("".concat(j,"posts")).then((function(t){if(!t.ok)throw new Error("Error");return t.json()})).then((function(t){s(t),b(!0)}))}),[]);return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(h,{}),Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{path:"/all_posts",children:Object(u.jsx)(N,{posts:c,loader:r})}),Object(u.jsx)(d.b,{path:"/add_post",children:Object(u.jsx)(g,{maxId:Math.max.apply(Math,Object(i.a)(c.map((function(t){return t.id}))))})}),Object(u.jsx)(d.b,{path:"/update_post/:postId",component:y}),Object(u.jsx)(d.a,{path:"/home",to:"/"})]})]})};c(35);o.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(S,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.ac5ba591.chunk.js.map